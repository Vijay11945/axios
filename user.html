<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
  <title> User Details  </title>
</head>
<body>
   <form onsubmit="saveToLocalStorage(event)">
   <label> Name </label>
   <input type="text" name = "usernm" required/>
   <label> EMAIL </label>
   <input type="email" name = "mailId" required/>
   <Label> Phone Number </label>
   <input type="tel" name = "phonenumber"/>
   <button >Submit </button>
   <ui id = "listofitems"></ui>

   <script src = "https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js" ></script>

   <script>
	function saveToLocalStorage(event)
	{
	event.preventDefault();
	const name = event.target.usernm.value;
	const email = event.target.mailId.value;
	const phonenumber = event.target.phonenumber.value;
    // localStorage.setItem('name',name);
    //  localStorage.setItem('email,email);
     // localStorage.setItem('phonenumber',phonenumber)
	const obj = {
	name,
	email,
	phonenumber
             }
    axios.post("https://crudcrud.com/Dashboard/09e947891dac48feaa87df95a5eaa473",obj).then((response) =>
    {
      console.log(response);

    })
    .catch((err) =>
    {
      console.log(err)
    } )
 // localStorage.setItem(obj.email, JSON.stringify(obj))
//	showUserOnScreen(obj);	
            }

    window.addEventListener("DomContentLoaded", () => {
        const localStorageObj = localStorage;
        const localStorageKeys = Object.keys(localStorageObj)
        for(i=0 ;i<localStorageKeys.length;i++)
        {
          const key = localStorageKeys[i]
          const userDetailsString = localStorageObj[keys];
          const userDetailsObj = JSON.parse(userDetailsString);
          showUserOnScreen(userDetailsObj)
        }
    })
	
	
	
	function showUserOnScreen(obj)
	{
	const parentElem = document.getElementById("listofitems")
	const childElem = document.createElement("li")
	childElem.textContent = obj.name +"-"+ obj.email +"-"+ obj.phonenumber
     
     // const deleteButton = document.createElement('input')
     // deleteButton.type = "button"
     // deleteButton.value = "Delete"
     // deleteButton.onclick = () =>
     /* {
       localStorage.RemoveItem(obj.email)
       parentElem.removeChild(ChildElem)
       }
      childElem.appendchild(deletebutton)
	    parentElem.appendChild(childElem)*/
	}
	//store user details in local storage
	
	</script>
 
</body>
</html>
   
